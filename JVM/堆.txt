Heap	堆

	堆数据结构:	
		特殊的树形数据结构，一棵完全二叉树，满足父节点的值总是不大于或不小于其子节点的值。
		根据堆属性的不同，堆可以分为最大堆和最小堆。
			最大堆是指每个节点的值都不小于其子节点的值，根节点的值是最大的；
			最小堆是指每个节点的值都不大于其子节点的值，根节点的值是最小的。

		完全二叉树:
			一种特殊的二叉树，
			定义：
				完全二叉树是一棵深度为k，有n个节点的二叉树，且除了最后一层外，
				其他各层的节点数都达到最大个数，最后一层所有的结点都连续集中在最左边。
			特点：
				叶子节点只能出现在最后两层。
				最后一层的叶子节点都靠左排列。
				除了最后一层，其他层的节点个数都要达到最大。
				完全二叉树通常采用数组而不是链表存储，因为这样可以更加高效地利用计算机内存。 
	
	堆:
		存储对象和数组，是JVM管理的内存中最大的一块区域，也是被所有线程共享的区域。
		Java中的对象和数组都会在堆上分配内存，垃圾回收时也会对堆中的对象进行回收和清理。

	特点:	
		是线程共享的,堆中对象都要考虑线程安全问题
		有垃圾回收机制


	堆内存溢出	OutOfMemoryError

		例:	String a="hello";
			while(true){
				list.add(a);
				a=a+a;
			}

		垃圾回收是只有在变量不再使用的时候才会回收,在使用的不回收
		一般都是过了变量的作用范围就销毁


	堆空间内存默认	4G,	可以用 -Xmx100m 设置大小为100m

	堆内存诊断
		
		jps工具
			查看当前系统中有哪些java进程
		jmap工具
			查看堆内存占用情况(查询某一时刻内存占用)

			jmap -heap 线程id		检查堆内存占用	
				

		jconsole工具
			图形界面的,多功能的监测工具,可以连续监测
			堆内存,cpu,线程,进程,都能监测

		jvisualvm工具
			可视化界面展示虚拟机内容
			高版本jdk没有这个工具了，需要自己下载,JDK9之后就不支持了

		
	案例:	垃圾回收后,内存占用依然很高
		
		用jvisualvm工具中dump功能



		
		